* ###### MySql
* ###### Redis

  Redis 是完全开源免费的，遵守BSD协议，是一个高性能的key-value数据库。  
  Redis 与其他 key - value 缓存产品有以下三个特点：  
  Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。  
  Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。  
  Redis支持数据的备份，即master-slave模式的数据备份。

  * ###### 内部数据结构

    Redis 和其他很多 key-value 数据库的不同之处在于，Redis 不仅支持简单的字符串键值对，它 还提供了一系列数据结构类型值，比如列表、哈希、集合和有序集，并在这些数据结构类型上 定义了一套强大的 API 。

    * ###### sds

      字符串，追加优化

    * ###### 双端链表
    * ###### 字典

      实现数据库键空间，用作 Hash 类型键的其中一种底层实现  
      Redis 中的数据库和哈希键都基于字典来实现  
       Redis 字典的底层实现为哈希表，每个字典使用两个哈希表

    * ###### 跳跃表

  * ###### 内存映射数据结构

    * ###### 整数集合（intset）

      有序，支持升级不降级

    * ###### 压缩列表（ziplist）

      可以保存字符数组或整数值，是哈希键、列表键和有序集合键的底层实现之一
  * ###### Redis数据类型

    Redis 使用自己实现的对象机制来实现类型判断、命令多态和基于引用计数的垃圾回收

    * ###### 字符串（String）
    * ###### 哈希表（Hash）

      压缩列表，字典

    * ###### 列表（List）

      压缩列表，双端链表

    * ###### 集合（Set）

      intset，字典（集合将元素保存到字典的键里面，而字典的值则统一设 为 NULL）

    * ###### 有序集（Sorted Set）

      压缩列表，跳跃表

  * ###### 功能实现

    * ###### 事务

      事务提供了一种“将多个命令打包，然后一次性、按顺序地执行”的机制，并且事务在执行的期 间不会主动中断  
      Redis 的事务保证了 ACID 中的一致性（C）和隔离性（I），但并不保证原子性（A）和 持久性（D）

    * ###### 订阅和发布

      订阅信息由服务器进程维持的 redisServer.pubsub\_channels 字典保存，字典的键为被 订阅的频道，字典的值为订阅频道的所有客户端  
      订阅模式的信息由服务器进程维持的 redisServer.pubsub\_patterns 链表保存，链表的 每个节点都保存着一个 pubsubPattern 结构，结构中保存着被订阅的模式，以及订阅该 模式的客户端。程序通过遍历链表来查找某个频道是否和某个模式匹配

    * ###### 慢查询日志

      Redis 用一个链表以 FIFO 的顺序保存着所有慢查询日志
  * ###### 内部运作机制

    * ###### 数据库

      数据库主要由 dict 和 expires 两个字典构成，其中 dict 保存键值对，而 expires 则 保存键的过期时间  
      过期键删除策略是惰性删除加上定期删除

    * ###### RDB

      RDB 将数据库的快照（snapshot）以二进制的方式保存到磁盘中

    * ###### AOF

      AOF 以协议文本的方式，将所有对数据库进行过写入的命令（及其参数）记录到 AOF 文件，以此达到记录数据库状态的目的  
      AOF 重写的目的是用更小的体积来保存数据库状态，整个重写过程基本上不影响 Redis 主进程处理命令请求

    * ###### 事件

      读事件，写事件，时间事件  
      文件事件和时间事件之间是合作关系：一种事件会等待另一种事件完成之后再执行，不会出现抢占情况

    * ###### 服务器和客户端

      服务器为每个已连接的客户端维持一个客户端结构，这个结构保存了这个客户端的所有状态信息  
      客户端向服务器发送命令，服务器接受命令然后将命令传给命令执行器，执行器执行给 定命令的实现函数，执行完成之后，将结果保存在缓存，最后回传给客户端
  * ###### Redis 分区

    * ###### 范围分区

       最简单的分区方式是按范围分区，就是映射一定范围的对象到特定的Redis实例

    * ###### 哈希分区
  * ###### Redis[缓存](https://blog.csdn.net/acmman/article/details/53167917)机制

    * ###### 特点

      Redis将其数据库完全保存在内存中，仅使用磁盘进行持久化  
      与其它键值数据存储相比，Redis有一组相对丰富的数据类型  
      Redis可以将数据复制到任意数量的从机中



